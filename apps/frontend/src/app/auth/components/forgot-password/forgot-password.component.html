<div class="auth-wrapper">
  <div class="auth-card">
    <h2 class="auth-title">Forgot your password?</h2>
    <p class="auth-subtitle">Enter your email address and we'll send you a link to reset your password</p>

    @if (!emailSent()) {
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="auth-form">
        <!-- Email Field -->
        <mat-form-field appearance="fill">
          <mat-label>Email</mat-label>
          <input matInput type="email" formControlName="email" placeholder="example@example.com" />

          @if (email.invalid && (email.touched || submitted())) {
            @for (error of emailErrors; track error) {
              <mat-error>{{ error }}</mat-error>
            }
          }
        </mat-form-field>

        <!-- Submit Button -->
        <button 
          mat-raised-button 
          color="primary" 
          type="submit"
        >
          @if (isLoading()) {
            <mat-icon>hourglass_empty</mat-icon>
          } @else if (forgotPasswordForm.invalid) {
            <mat-icon>block</mat-icon>
          } @else {
            <mat-icon>send</mat-icon>
          }
          
          @if (isLoading()) {
            Sending...
          } @else {
            Send reset link
          }
        </button>
      </form>
    } @else {
      <!-- Success State -->
      <div class="success-state">
        <div class="success-icon">
          <mat-icon>check_circle</mat-icon>
        </div>
        <h3 class="success-title">Check your email</h3>
        <p class="success-message">
          We've sent a password reset link to <strong>{{ email.value }}</strong>
        </p>
        <p class="success-note">
          Didn't receive the email? Check your spam folder or try again.
        </p>
        
        <div class="form-actions">
          <button 
            mat-raised-button 
            color="primary" 
            (click)="onResendEmail()"
            class="resend-button"
          >
            <mat-icon>refresh</mat-icon>
            Send another email
          </button>
        </div>
      </div>
    }

    <!-- Navigation Links -->
    <p class="auth-link-text">
      Remember your password?
      <a routerLink="/auth/login">Back to login</a>
    </p>
    
    <p class="auth-link-text">
      Don't have an account?
      <a routerLink="/auth/register">Sign up</a>
    </p>
  </div>
</div>
